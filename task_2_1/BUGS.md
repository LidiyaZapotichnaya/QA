## Отчеты о дефектах для API микросервиса объявлений

### **Общее окружение**:
- ОС Windows 11 Pro, build 22631.4460
- Python 3.13.2 + pytest
- URL: `https://qa-internship.avito.com`
- Postman-коллекция: `https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/QA/QA-trainee-assignment-spring-2025/postman_collection.json`
---

### BUG-001: Сервер возвращает неверную структуру ответа при сохранении объявления с корректными данными
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {
        "sellerId": 567890,
        "name": "Valid Item 1",
        "price": 5000,
        "statistics": {
            "likes": 34,
            "viewCount": 756,
            "contacts": 12
        }
    }
     ```
- **Шаги по воспроизведению:**
  1. Отправить POST-запрос (POST /api/1/item) с корректными данными
  2. Проверить тело ответа от сервера
 
- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    {
      "id": "<string>",
      "sellerId": "<integer>",
      "name": "<string>",
      "price": "<integer>",
      "statistics": {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
      },
      "createdAt": "<string>"
    }
    ```

- **Фактический результат:** 
    - В теле ответа отсутствуют все требуемые поля, а также присутствует лишнее поле "status"

- **Severity:** Major
- **Priority:** High 
- **Вложения:**
- **Связанные тест-кейсы:** TC-001, TC-002, TC-003, TC-004

---

### BUG-002: Сервер возвращает неверный код состояния при сохранении объявления с пустыми или отрицательными значениями данных
- **Окружение:** API v1
- **Примеры тестовых данных:**
   ```json
    {}
    ```

    ```json
    {
      "sellerId": -567890,
      "name": "Negative parameters",
      "price": -1,
      "statistics": {
          "likes": -65,
          "viewCount": -500,
          "contacts": -7
      }
    }
     ```
- **Шаги по воспроизведению:**
  1. Отправить POST-запрос (POST /api/1/item) с пустыми или отрицательными значениями данных
  2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 400 Bad Request

- **Фактический результат:** 
    - HTTP Status: 200 OK

- **Severity:** Major
- **Priority:** High 
- **Вложения:**
- **Связанные тест-кейсы:** TC-005, TC-006, TC-015


### BUG-003: Сервер возвращает неверные значения полей в теле ответа при получении объявления с существующим id
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {
        "sellerId": 567890,
        "name": "Valid Item 1",
        "price": 5000,
        "statistics": {
            "likes": 34,
            "viewCount": 756,
            "contacts": 12
        }
    }
     ```
- **Шаги по воспроизведению:**
    1. Сохранить объявление с корректными данными
    2. Получить id сохраненного объявления
    3. Отправить GET-запрос (GET /api/1/item/{id}) 
    4. Проверить тело ответа от сервера

- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    {
      "id": "<string>",
      "sellerId": "<integer>",
      "name": "<string>",
      "price": "<integer>",
      "statistics": {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
      },
      "createdAt": "<string>"
    }
    ```
  - Значения полей совпадают с отправленными тестовыми данными
  - Значение поля "createdAt" соответствует дате сохранения объявления

- **Фактический результат:** 
    - Значения полей "name" и "price" не совпадают с отправленными данными. Значение поля "createdAt" не соответствует дате сохранения объявления
    - Поле 'name': ожидалось 'Valid Item 1', получено 'Valid Item 1 'а вот тут ошибка=)''
    - Поле 'price': ожидалось 5000, получено 10000
    - Поле 'createdAt': ожидалось '2025-04-20', получено '2025-04-21'

- **Severity:** Major
- **Priority:** High 
- **Вложения:**
- **Связанные тест-кейсы:** TC-016

---

### BUG-004: Сервер возвращает неверные значения полей в теле ответа при получении объявления с несуществующим id
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {"id": "00000000-0000-0000-0000-000000000000"}
     ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/1/item/{id}) 
    2. Проверить тело ответа от сервера
 
- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    {
      "result": "laborum",
      "status": "cillum enim eiusmod"
    }
    ```
- **Фактический результат:** 
    - Поле 'result': получено '{'message': 'item 00000000-0000-0000-0000-000000000000 not found', 'messages': None}'
    - Поле 'status': получено '404'

- **Severity:** Minor
- **Priority:** Medium
- **Вложения:**
- **Связанные тест-кейсы:** TC-017, TC-018
- **Комментарий:** Не уверена, обязательными ли являются значения полей в ожидаемой структуре тела ответа

---

### BUG-005: Сервер возвращает неверный код состояния при получении объявления с пустым id
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {"id": ""}
     ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/1/item/{id}) 
    2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 400 Bad Request

- **Фактический результат:** 
    - HTTP Status: 404 Not Found

- **Severity:** Major 
- **Priority:** Medium 
- **Вложения:**
- **Связанные тест-кейсы:** TC-021

---

### BUG-006: Сервер возвращает неверные значения полей в теле ответа при получении всех объявлений продавца с существующим id
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {
        "sellerId": 567890,
        "name": "Valid Item 1",
        "price": 5000,
        "statistics": {
            "likes": 34,
            "viewCount": 756,
            "contacts": 12
        }
    }
     ```
- **Шаги по воспроизведению:**
    1. Сохранить объявление с корректными данными
    2. Отправить GET-запрос (GET /api/1/{sellerId}/item) 
    3. Проверить тело ответа от сервера

- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    [
      {
        "id": "<string>",
        "sellerId": "<integer>",
        "name": "<string>",
        "price": "<integer>",
        "statistics": {
          "likes": "<integer>",
          "viewCount": "<integer>",
          "contacts": "<integer>"
        },
        "createdAt": "<string>"
      },
      {
        "id": "<string>",
        "sellerId": "<integer>",
        "name": "<string>",
        "price": "<integer>",
        "statistics": {
          "likes": "<integer>",
          "viewCount": "<integer>",
          "contacts": "<integer>"
        },
        "createdAt": "<string>"
      }
    ]
    ```
  - Значения полей совпадают с отправленными тестовыми данными
  - Значение поля "createdAt" соответствует дате сохранения объявления

- **Фактический результат:** 
  - Значения полей "sellerId" и "price" не совпадают с отправленными данными. Значение поля "createdAt" не соответствует дате сохранения объявления
  - Поле 'sellerId': ожидалось '567890', получено '10000'
  - Поле 'price': ожидалось '5000', получено '567890'
  - Поле 'createdAt': ожидалось '2025-04-20', получено '2025-04-21'

- **Severity:** Major
- **Priority:** High 
- **Вложения:**
- **Связанные тест-кейсы:** TC-023

---

### BUG-007: Сервер возвращает неверный код состояния при получении всех объявлений продавца с граничным значением id
- **Окружение:** API v1
- **Пример тестовых данных:**
    ```json
    {"sellerId": 999999}
    ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/1/{sellerId}/item) 
    2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 200 OK

- **Фактический результат:** 
    - HTTP Status: 400 Bad Request

- **Severity:** Major 
- **Priority:** High  
- **Вложения:**
- **Связанные тест-кейсы:** TC-026, TC-028

---

### BUG-008: Сервер возвращает неверные значения полей в теле ответа при получении статистик по объявлению с существующим id
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {
        "sellerId": 567890,
        "name": "Valid Item 1",
        "price": 5000,
        "statistics": {
            "likes": 34,
            "viewCount": 756,
            "contacts": 12
        }
    }
     ```
- **Шаги по воспроизведению:**
    1. Сохранить объявление с корректными данными
    2. Получить id сохраненного объявления
    3. Отправить GET-запрос (GET /api/1/statistic/{id}) 
    4. Проверить тело ответа от сервера

- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    [
      {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
      },
      {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
      }
    ]
    ```
  - Значения полей совпадают с отправленными тестовыми данными

- **Фактический результат:** 
  - Значения полей "likes" и "viewCount" не совпадают с отправленными данными
  - Поле 'likes': ожидалось '34', получено '1'
  - Поле 'viewCount': ожидалось '756', получено '1'

- **Severity:** Major
- **Priority:** High 
- **Вложения:**
- **Связанные тест-кейсы:** TC-029

---

### BUG-009: Сервер возвращает неверные значения полей в теле ответа при получении статистик по объявлению с несуществующим id
- **Окружение:** API v1
- **Пример тестовых данных:**
     ```json
    {"id": "00000000-0000-0000-0000-000000000000"}
     ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/1/statistic/{id})
    2. Проверить тело ответа от сервера
 
- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    {
      "result": "laborum",
      "status": "cillum enim eiusmod"
    }
    ```
- **Фактический результат:** 
    - Поле 'result': получено '{'message': 'statistic 00000000-0000-0000-0000-000000000000 not found', 'messages': None}'
    - Поле 'status': получено '404'

- **Severity:** Minor 
- **Priority:** Medium
- **Вложения:**
- **Связанные тест-кейсы:** TC-030
- **Комментарий:** Не уверена, являются ли значения полей в ожидаемой структуре тела ответа обязательными

---

### BUG-010: Сервер возвращает неверный код состояния при получении статистик по объявлению с удаленным id
- **Окружение:** API v1
- **Пример тестовых данных:**
    ```json
    {"id": "8849aebc-b04b-486f-abd2-1f34db2158ca"}
    ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/1/statistic/{id}) 
    2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 404 Not Found

- **Фактический результат:** 
    - HTTP Status: 200 OK

- **Severity:** Major
- **Priority:** High
- **Вложения:**
- **Связанные тест-кейсы:** TC-031

---

### BUG-011: Сервер возвращает неверный код состояния при получении статистик по объявлению с пустым id
- **Окружение:** API v1
- **Пример тестовых данных:**
    ```json
    {"id": ""}
    ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/1/statistic/{id}) 
    2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 400 Bad Request

- **Фактический результат:** 
    - HTTP Status: 404 Not Found

- **Severity:** Major
- **Priority:** Medium
- **Вложения:**
- **Связанные тест-кейсы:** TC-034

---

### BUG-012: Сервер возвращает неверные значения полей в теле ответа при получении статистик по объявлению с существующим id
- **Окружение:** API v2
- **Пример тестовых данных:**
     ```json
    {
        "sellerId": 567890,
        "name": "Valid Item 1",
        "price": 5000,
        "statistics": {
            "likes": 34,
            "viewCount": 756,
            "contacts": 12
        }
    }
     ```
- **Шаги по воспроизведению:**
    1. Сохранить объявление с корректными данными
    2. Получить id сохраненного объявления
    3. Отправить GET-запрос (GET /api/2/statistic/{id}) 
    4. Проверить тело ответа от сервера

- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    [
      {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
      },
      {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
      }
    ]
    ```
  - Значения полей совпадают с отправленными тестовыми данными

- **Фактический результат:** 
  - Значения полей не совпадают с отправленными данными
  - Поле 'likes': ожидалось '34', получено '999999999'
  - Поле 'viewCount': ожидалось '756', получено '999999999'
  - Поле 'contacts': ожидалось '12', получено '999999999'

- **Severity:** Major
- **Priority:** High
- **Вложения:**
- **Связанные тест-кейсы:** TC-036

---

### BUG-013: Сервер возвращает неверный код состояния при получении статистик по объявлению с некорректным или несуществующим id
- **Окружение:** API v2
- **Пример тестовых данных:**
    ```json
    {"id": "00000000-0000-0000-0000-000000000000"}
    ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/2/statistic/{id}) 
    2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 404 Not Found

- **Фактический результат:** 
    - HTTP Status: 200 OK

- **Severity:** Major
- **Priority:** High 
- **Вложения:**
- **Связанные тест-кейсы:** TC-037, TC-038, TC-039, TC-040, TC-042

---

### BUG-014: Сервер возвращает неверную структуру ответа при получении статистик по объявлению с пустым id
- **Окружение:** API v2
- **Пример тестовых данных:**
     ```json
    {"id": ""}
     ```
- **Шаги по воспроизведению:**
    1. Отправить GET-запрос (GET /api/2/statistic/{id})
    2. Проверить тело ответа от сервера
 
- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    {
      "result": "laborum",
      "status": "cillum enim eiusmod"
    }
    ```
- **Фактический результат:** 
    - Поле 'result' отсутствует
    - Поле 'status' отсутствует
    - Присутствует лишнее поле 'message'
    - Присутствует лишнее поле 'code'

- **Severity:** Minor
- **Priority:** Medium
- **Вложения:**
- **Связанные тест-кейсы:** TC-041

---

### BUG-015: Сервер возвращает неверную структуру ответа при удалении объявления с несуществующим id
- **Окружение:** API v2
- **Пример тестовых данных:**
     ```json
    {"id": "00000000-0000-0000-0000-000000000000"}
     ```
- **Шаги по воспроизведению:**
    1. Отправить DELETE-запрос (DELETE /api/2/item/{id})
    2. Проверить тело ответа от сервера
 
- **Ожидаемый результат:** 
  - Тело ответа в формате JSON возвращается от сервера. Его структура, имена и типы полей соответствует схеме, указанной в Postman-коллекции:
    ```json
    {
      "result": "laborum",
      "status": "cillum enim eiusmod"
    }
    ```
- **Фактический результат:** 
    - result: ожидался тип '<class 'str'>', получен '<class 'dict'>'
    - Поле 'result': ожидалось 'laborum', получено '{'message': '', 'messages': None}'
    - Поле 'status': ожидалось 'cillum enim eiusmod', получено '500'

- **Severity:** Major
- **Priority:** Medium 
- **Вложения:**
- **Связанные тест-кейсы:** TC-044, TC-045

---

### BUG-016: Сервер возвращает неверный код состояния при удалении объявления с пустым id
- **Окружение:** API v2
- **Пример тестовых данных:**
    ```json
    {"id": ""}
    ```
- **Шаги по воспроизведению:**
    1. Отправить DELETE-запрос (DELETE /api/2/item/{id}) 
    2. Проверить код состояния ответа от сервера
 
- **Ожидаемый результат:** 
    - HTTP Status: 400 Bad Request

- **Фактический результат:** 
    - HTTP Status: 404 Not Found

- **Severity:** Major
- **Priority:** Medium 
- **Вложения:**
- **Связанные тест-кейсы:** TC-048
